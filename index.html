<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>üéµ MP3 Lok Management</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background: #f5f6fa;
    }
    header {
      background: #007bff; color: white;
      padding: 15px; text-align: center;
      font-size: 18px; font-weight: bold;
    }
    .container {
      padding: 15px;
    }
    .upload-box {
      background: white;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      margin-bottom: 15px;
    }
    .upload-box input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    .btn {
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      width: 100%;
    }
    .btn-upload { background:#28a745; color:white; }
    .btn-upload:hover { background:#1f7a32; }
    .songs-container {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .song-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      padding: 12px;
      display: flex;
      flex-direction: column;
    }
    .song-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 8px 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .btn-download {
      padding: 10px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      background:#007bff; color:white;
      text-align: center;
      text-decoration: none;
      display: block;
      margin-top: 8px;
    }
    .btn-download:hover { background:#0056d2; }
    audio {
      width: 100%;
      margin-top: 6px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>üé∂ MP3 Lok Management</header>

  <div class="container">
    <!-- Upload Box -->
    <div class="upload-box">
      <h3>‚¨ÜÔ∏è MP3 Upload</h3>
      <input type="file" id="mp3File" accept="audio/mp3" />
      <button class="btn btn-upload" onclick="uploadMp3()">Upload</button>
    </div>

    <!-- Songs List -->
    <h3>üìÇ Songs List</h3>
    <div class="songs-container" id="songs">
      <p>‚è≥ Loading songs...</p>
    </div>
  </div>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

  <script>
    // üîë ‡§Ü‡§™‡§ï‡§æ Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyD14Z3b7uCk62FBCK9SSZlczSxnMXndM1o",
      authDomain: "mp3-8247a.firebaseapp.com",
      databaseURL: "https://mp3-8247a-default-rtdb.firebaseio.com",
      projectId: "mp3-8247a",
      storageBucket: "mp3-8247a.appspot.com",
      messagingSenderId: "228735051694",
      appId: "1:228735051694:web:99bdbbe737b66224ef4a3f"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // üéµ MP3 Upload Function
    function uploadMp3() {
      const fileInput = document.getElementById("mp3File");
      const file = fileInput.files[0];
      if (!file) { alert("‚ö†Ô∏è ‡§™‡§π‡§≤‡•á MP3 ‡§ö‡•Å‡§®‡•á‡§Ç"); return; }

      const reader = new FileReader();
      reader.onload = function(e) {
        const base64 = e.target.result.split(",")[1];
        db.ref("mp3s").push({
          filename: file.name,
          base64: base64
        });
        alert("‚úÖ MP3 ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§Ø‡§æ!");
        fileInput.value = "";
      };
      reader.readAsDataURL(file);
    }

    // üé∂ Songs List Load
    db.ref("mp3s").on("value", snap => {
      const container = document.getElementById("songs");
      container.innerHTML = "";
      if (!snap.exists()) {
        container.innerHTML = "<p>‚ùå ‡§ï‡•ã‡§à ‡§ó‡§æ‡§®‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ</p>";
        return;
      }

      const data = snap.val();
      Object.keys(data).forEach(id => {
        const song = data[id];
        const src = `data:audio/mpeg;base64,${song.base64}`;

        const card = document.createElement("div");
        card.className = "song-card";
        card.innerHTML = `
          <p class="song-title">üéµ ${song.filename || "Untitled.mp3"}</p>
          <audio controls preload="none" src="${src}"></audio>
          <a class="btn-download" href="${src}" download="${song.filename}">‚¨áÔ∏è Download</a>
        `;
        container.appendChild(card);
      });
    });
  </script>
</body>
</html>
